<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <script src="/socket.io/socket.io.js"></script>
    <script src="p2p.js"></script>
</head>
<body>
    <video id="local_video_01"></video>
    <video id="remote_video_01"></video>
    <video id="local_video_02"></video>
    <video id="remote_video_02"></video>
</body>
<script>
    const $local_video_01 = document.getElementById("local_video_01");
    const $remote_video_02 = document.getElementById("remote_video_02");

    
    (async function(){
        const stream_01 = await getStream($local_video_01);
        const peer1 = new P2P({ my_id: "01", remote_id: "02", stream: stream_01});
        const peer2 = new P2P({ my_id: "02", remote_id: "01", stream: stream_02});
        await peer1.on("call", (stream) => { 
            $remote_video_01.srcObject = stream;
            $remote_video_01.play();
        });
        await peer2.on("call", (stream) => {
            $remote_video_02.srcObject = stream;
            $remote_video_02.play();
        });
        await peer1.call();
    })();
</script>
<style>
video {
    width: 300px;
}
</style>
</html>